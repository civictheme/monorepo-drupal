{#
/**
 * @file
 * Checkbox group component.
 *
 * Variables:
 * - theme: [string] Theme: light, dark.
 * - is_invalid: [boolean] Denote if the control is invalid.
 * - is_disabled: [boolean] Denote if the control is disabled.
 * - direction: [string] Direction: horizontal, vertical.
 * - items: [array] Array of children items:
 *   - label: [string] Child label.
 *   - value: [string] Child value.
 *   - id: [string] Optional DOM id. If not provided - parent will be used.
 *   - is_checked: [boolean] Denote if the component is checked.
 *   - is_disabled: [boolean] Denote if the component is disabled.
 *   - is_invalid: [boolean] Denote if the component is invalid.
 * - attributes: [string] Additional attributes.
 * - modifier_class: [string] Additional classes.
 */
#}

{% set theme_class = 'ct-theme-%s'|format(theme|default('light')) %}
{% set direction_class = 'ct-checkbox-group--%s'|format(direction|default('vertical')) %}
{% set disabled_class = is_disabled ? 'ct-checkbox-group--disabled' : '' %}
{% set error_class = is_invalid ? 'ct-checkbox-group--error' : '' %}
{% set modifier_class = '%s %s %s %s %s'|format(theme_class, direction_class, disabled_class, error_class, modifier_class|default(''))|trim %}

{% if items is not empty %}
  {% set list_items = [] %}
  {% for key, item in items %}
    {% set list_item %}
      {% set item = { theme:theme, is_disabled: is_disabled, is_invalid: is_invalid } | merge(item) %}
      {% include '@atoms/checkbox/checkbox.twig' with item only %}
    {% endset %}
    {% set list_items = list_items|merge([ list_item ]) %}
  {% endfor %}

  <div class="ct-checkbox-group {{ modifier_class }}" {% if attributes %}{{ attributes|raw }}{% endif %}>
    {% include '@base/item-list/item-list.twig' with {
      direction: direction,
      items: list_items,
    } only %}
  </div>
{% endif %}
