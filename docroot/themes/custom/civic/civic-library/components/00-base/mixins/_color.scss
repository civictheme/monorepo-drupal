//
// Color mixins.
//
@use 'sass:map';
@use 'sass:string';
@use 'sass:color';

//
// Get a color from the pre-defined list of colors.
//
@function civic-color($name) {
  $all-colors: _civic-colors-all();

  @if map.get($all-colors, $name) == null {
    @error '"#{$name}" is not an available color.';
  }

  @return map.get($all-colors, $name);
}

//
// Base color palette access.
//
// Do not use directly.
// Provides only base color palette access. Used for generating the other
// derivative palettes (e.g. shades / neutrals / elements).
// Use @include civic-color() instead.
//
@function civic-color-base($name) {
  @return map.get(map.merge($civic-colors-default, $civic-colors), $name);
}

//
// Compile all colors into a single map.
//
// Do not use directly.
// Use @include civic-color() mixin instead.
//
// stylelint-disable-next-line scss/at-function-pattern
@function _civic-colors-all() {
  $all-colors: ();
  $all-colors: map.merge($all-colors, $civic-colors-default);
  $all-colors: map.merge($all-colors, $civic-colors-default-shades-dark);
  $all-colors: map.merge($all-colors, $civic-colors-default-shades-light);
  $all-colors: map.merge($all-colors, $civic-colors-default-neutrals);
  $all-colors: map.merge($all-colors, $civic-colors);

  @return $all-colors;
}

//
// Encode color to be suitable for embedding.
//
@function civic-color-encode($string) {
  @if type-of($string) == 'color' and string.index(#{$string}, '#') == 1 {
    $hex: string.slice(color.ie-hex-str($string), 4);
    $string: string.unquote('#{$hex}');

    @return '%23' + $string;
  }

  @return $string;
}

//
// String to fill SVG with color.
//
@function civic-color-svg-fill($svg, $color) {
  @return civic-str-replace($svg, "fill=''", "fill='#{civic-color-encode($color)}'");
}
