services:
  civictheme_migrate.migration_file_validator:
    class: \Drupal\civictheme_migrate\Validator\MigrationFileValidator
    arguments:
      - '@civictheme_migrate.migration_schema_manager'
      - '@civictheme_migrate.json_schema_validator'

  civictheme_migrate.migration_schema_manager:
    class: \Drupal\civictheme_migrate\Validator\MigrationSchemaManager
    arguments:
      - '@extension.path.resolver'

  civictheme_migrate.json_schema_validator:
    class: '\Opis\JsonSchema\Validator'
    public: false

  civictheme_migrate.component_factory:
    class: Drupal\civictheme_migrate\Component\ComponentFactory
    arguments:
      - '@entity_type.manager'
      - '@migrate.lookup'
      - '@civictheme_migrate.converter_manager'

  civictheme_migrate.converter_manager:
    class: Drupal\civictheme_migrate\Converter\ConverterManager
    arguments:
      - '@civictheme_migrate.lookup_manager'

  civictheme_migrate.lookup_manager:
    class: Drupal\civictheme_migrate\LookupManager
    arguments:
      - '@entity_type.manager'
      - '@path_alias.manager'
      - '@file.usage'
      - '@stream_wrapper_manager'

  civictheme_migrate.migration_plugin_subscriber:
    class: Drupal\civictheme_migrate\EventSubscriber\MigrationPluginSubscriber
    arguments:
      - '@config.factory'
    tags:
      - { name: event_subscriber }
