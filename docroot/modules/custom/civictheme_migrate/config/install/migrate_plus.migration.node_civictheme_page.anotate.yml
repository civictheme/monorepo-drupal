langcode: en
status: true
dependencies:
  enforced:
    module:
      - civictheme_migrate
id: node_civictheme_page_anotate
class: null
field_plugin_method: null
cck_plugin_method: null
migration_tags:
  - civictheme_migrate
migration_group: civictheme_migrate
label: 'Node CivicTheme Page components'
source:
  plugin: url
  data_fetcher_plugin: file
  data_parser_plugin: json
  fields:
    - name: content
      label: Components
      selector: content/children
    - name: alias
      label: 'Path alias'
      selector: alias
  ids:
    alias:
      type: string
      max_length: 2048
  urls: []
process:
  field_c_n_components:
    -
      plugin: skip_on_empty
      source: content
      method: row
      message: 'Content is empty'
    -
      plugin: migration_lookup
      migration: civictheme_page
      source: alias
      no_stub: true
    -
      plugin: ct_content_component_create
      source: 'content'
      migration_lookup:
        __default__:
          no_stub: true
          migration:
            - civictheme_page
destination:
  plugin: 'entity:node'
  default_bundle: civictheme_page
  overwrite_properties:
    - field_c_n_components
migration_dependencies:
  required:
    - node_civictheme_page
    - media_civictheme_image
