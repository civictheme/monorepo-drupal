langcode: en
status: true
dependencies:
  enforced:
    module:
      - civictheme_migrate
id: node_civictheme_page_annotate
class: null
field_plugin_method: null
cck_plugin_method: null
migration_tags:
  - civictheme_migrate
migration_group: civictheme_migrate
label: 'Node CivicTheme Page'
source:
  plugin: url
  data_fetcher_plugin: file
  data_parser_plugin: json
  fields:
    -
      name: id
      label: ID
      selector: id
    -
      name: alias
      label: 'Path alias'
      selector: alias
    -
      name: content
      label: Components
      selector: content/children
  ids:
    alias:
      type: string
      max_length: 2048
  urls: { }
process:
  nid:
    -
      plugin: skip_on_empty
      source: alias
      method: row
      message: 'URL is empty'
    -
      plugin: migration_lookup
      migration: node_civictheme_page
      no_stub: true
  field_c_n_components:
    -
      plugin: content_components
      source: content
destination:
  plugin: 'entity:node'
  default_bundle: civictheme_page
  overwrite_properties:
    - field_c_n_components
migration_dependencies:
  required:
    - media_civictheme_image
    - media_civictheme_icon
    - media_civictheme_document
    - node_civictheme_page
